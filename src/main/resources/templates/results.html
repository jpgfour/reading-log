<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>*****TESTING API CALL*****</title>
</head>
<body>
<div id="content"></div>
<script>
      function handleResponse(response) {
      for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        // in production code, item.text should have the HTML entities escaped.
        document.getElementById("content").innerHTML += "<br>" + item.volumeInfo.title;
      }
    }
    </script>
<script th:inline="javascript">
        var search=/*[[${searchTerm}]]*/;
        alert("here's the search term: " + search);
</script>

<script th:inline="javascript">

    var search=/*[[${searchTerm}]]*/;
    alert("here's the search term: " + search);

    var url="https://www.googleapis.com/books/v1/volumes?q=" + search + "&callback=handleResponse"
    alert("here's the search url: " + url);

    var JSElement = document.createElement('script');
    JSElement.src = url;
    document.getElementsByTagName('head')[0].appendChild(JSElement);

</script>

</body>
</html>