<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>*****TESTING API CALL*****</title>
</head>
<body>
<div id="content"></div>
<script>
    function showThumb(src) {
        var img = document.createElement("img");
        img.src = src;
        document.body.appendChild(img);
    }

      function handleResponse(response) {
      for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        // in production code, item.text should have the HTML entities escaped.

        var paragraph = document.createElement("P");
        paragraph.id = item.id;
        document.body.appendChild(paragraph);

        document.getElementById(item.id).innerHTML += "<br>" + item.volumeInfo.title + "   " + item.volumeInfo.authors + showThumb(item.volumeInfo.imageLinks.thumbnail);

<!--        var chkbox = document.createElement("INPUT");-->
<!--        chkbox.setAttribute("type", "checkbox");-->
<!--        chkbox.name = "chk" + item.id;-->
<!--        document.body.appendChild(chkbox);-->

        var radio = document.createElement("INPUT");
        radio.setAttribute("type", "radio");
        radio.name = "volumeSelect";
        radio.id = "radio" + item.id
        radio.value = "radio" + item.id;
        //default to first radio button always being checked
        if (i==0) {radio.checked = true;}
        document.body.appendChild(radio);

        var submitButton = document.createElement("BUTTON");
        submitButton.id = "submit" + item.id;
        submitButton.innerText = "Select " + item.volumeInfo.title;
        submitButton.addEventListener("click", function(click_id){alert("you clicked button # " + this.id);});
        document.body.appendChild(submitButton);

        }
    } <!--end function HandleResponse-->
</script>

<script th:inline="javascript">
        var search=/*[[${searchTerm}]]*/;
        alert("here's the search term: " + search);
</script>

<script th:inline="javascript">
    var search=/*[[${searchTerm}]]*/;
    alert("here's the search term: " + search);

    var url="https://www.googleapis.com/books/v1/volumes?q=" + search + "&callback=handleResponse"
    alert("here's the search url: " + url);

    var JSElement = document.createElement('script');
    JSElement.src = url;
    document.getElementsByTagName('head')[0].appendChild(JSElement);
</script>
<!--TODO: add "search again?" button/field-->
<!--TODO: add submit button which notes checked box and sends it to either-->
<!--TODO: more in-depth view-->
<!--TODO: or -->
<!--TODO: log screen (MVP)-->
<!--TODO: investigate switching to RADIO button-->
<!--TODO: name paragraphs so can reference?-->

</body>
</html>